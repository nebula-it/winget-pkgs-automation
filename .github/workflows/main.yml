name: Publish talosctl package
on:
  schedule:
    - cron:  '23 23 * * *'
jobs:
  winget:
    name: Publish talosctl winget package
    runs-on: windows-latest
    defaults:
      run:
        shell: pwsh
        working-directory: ${{ github.workspace }}
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      WINGET_PAT: ${{ secrets.WINGET_PAT }}
    steps:
      - name: Checkout code ðŸ‘‹
        uses: actions/checkout@v4
      - name: Create manifest and submit PR ðŸ“¦
        run: |
          ./createManifest.ps1